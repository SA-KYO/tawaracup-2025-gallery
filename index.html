<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å¤šå’Œæ¥½æ¯2025 å†™çœŸãƒ»å‹•ç”»ã‚®ãƒ£ãƒ©ãƒªãƒ¼</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ãƒ•ã‚©ãƒ³ãƒˆ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Noto Sans JP', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    .title-font {
      font-family: 'Poppins', 'Noto Sans JP', system-ui, sans-serif;
      letter-spacing: 0.06em;
    }

    /* ãƒãƒƒã‚¸ã®ã‚­ãƒ©ãƒƒ âœ¨ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    .tw-badge {
      position: relative;
      overflow: hidden;
    }
    .tw-badge::after {
      content: "âœ¨";
      position: absolute;
      top: 50%;
      left: -1.5rem;
      transform: translateY(-50%);
      animation: shine 1.4s linear infinite;
      opacity: 0;
    }
    @keyframes shine {
      0%   { transform: translate(-1.5rem, -50%); opacity: 0; }
      20%  { opacity: 1; }
      60%  { opacity: 1; }
      100% { transform: translate(5rem, -50%); opacity: 0; }
    }
  </style>
</head>
<body class="bg-gradient-to-b from-emerald-50 via-emerald-50 to-emerald-100 min-h-screen">

  <main class="max-w-4xl mx-auto px-4 py-8 md:py-10">
    <!-- è¦‹å‡ºã— -->
    <header class="mb-6 md:mb-10">
      <div class="tw-badge inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-100 text-emerald-700 text-xs md:text-sm font-semibold shadow-sm">
        <span class="text-lg">ğŸŒï¸â€â™‚ï¸</span>
        <span>å¤šå’Œæ¥½æ¯2025 ã‚³ãƒ³ãƒš</span>
      </div>
      <h1 class="title-font text-2xl md:text-3xl font-bold text-slate-900 mt-4">
        å†™çœŸãƒ»å‹•ç”»ã‚®ãƒ£ãƒ©ãƒªãƒ¼
      </h1>
      <p class="mt-2 text-sm md:text-base text-slate-600">
        ã‚³ãƒ³ãƒšå½“æ—¥ã«ã¿ã‚“ãªãŒã‚¢ãƒƒãƒ—ã—ã¦ãã‚ŒãŸãƒ™ã‚¹ãƒˆã‚·ãƒ§ãƒƒãƒˆãŒä¸¦ã³ã¾ã™ã€‚
      </p>
    </header>

    <!-- èª¬æ˜ + ã‚¿ãƒ– -->
    <section class="bg-white/90 backdrop-blur-md rounded-3xl shadow-lg border border-emerald-100 p-4 md:p-6 mb-6 md:mb-8">
      <!-- ä¸Šéƒ¨ãƒœã‚¿ãƒ³è¡Œ -->
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4 md:mb-5">
        <p class="text-xs md:text-sm text-slate-500">
          ã‚¹ãƒãƒ›ã‹ã‚‰ã®é–²è¦§ãƒ»ä¿å­˜ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚æ°—ã«å…¥ã£ãŸå†™çœŸãƒ»å‹•ç”»ã‚’ã‚¿ãƒƒãƒ—ã—ã¦å¤§ããè¡¨ç¤ºã—ãŸã‚Šã€
          ã€Œâ†“ é–‹ã„ã¦ä¿å­˜ã€ã‹ã‚‰ã‚‚ä¿å­˜ç”»é¢ã‚’é–‹ã‘ã¾ã™ã€‚
        </p>
        <a
          href="https://tawaracup-2025-photo.netlify.app/"
          class="inline-flex items-center justify-center px-4 py-2 rounded-full border border-emerald-300 bg-white text-emerald-700 text-xs md:text-sm font-semibold shadow-sm hover:bg-emerald-50 transition"
        >
          â† ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”»é¢ã«æˆ»ã‚‹
        </a>
      </div>

      <!-- ã‚¿ãƒ– -->
      <div class="flex bg-emerald-50 rounded-full p-1 text-sm font-semibold">
        <button
          id="tabPhotos"
          class="flex-1 inline-flex items-center justify-center gap-1.5 px-3 py-2 rounded-full bg-emerald-600 text-white shadow-sm transition"
        >
          <span>ğŸ“·</span><span>å†™çœŸ</span>
        </button>
        <button
          id="tabVideos"
          class="flex-1 inline-flex items-center justify-center gap-1.5 px-3 py-2 rounded-full text-emerald-700 hover:bg-emerald-100 transition"
        >
          <span>ğŸ¬</span><span>å‹•ç”»</span>
        </button>
      </div>

      <!-- ä¿å­˜ã®èª¬æ˜ï¼ˆã‚¹ãƒãƒ›ã®ã¿ï¼‰ -->
      <div class="mt-4 text-xs md:text-sm text-slate-500 leading-relaxed">
        <p class="mb-1">
          ã‚¹ãƒãƒ›ï¼šã‚µãƒ ãƒã‚¤ãƒ« ã¾ãŸã¯ã€Œâ†“ é–‹ã„ã¦ä¿å­˜ã€ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ã€å†™çœŸï¼å‹•ç”»ãŒåˆ¥ã‚¿ãƒ–ã§é–‹ãã¾ã™ã€‚
          ãã“ã§ <span class="font-semibold">é•·æŠ¼ã— â†’ã€Œå†™çœŸã«ä¿å­˜ã€ï¼ã€Œãƒ“ãƒ‡ã‚ªã‚’ä¿å­˜ã€</span> ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚
        </p>
        <p class="text-xs text-slate-400">
          â€»LINE ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ã€Œâ€¦ã€ã€Œãƒ“ãƒ‡ã‚ªã‚’ä¿å­˜ã€ãŒå‡ºãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãã®ã¨ãã¯å³ä¸Šãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰
          <span class="font-semibold">ã€ŒSafari ã§é–‹ãã€â†’ å…±æœ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ã€Œå†™çœŸã«ä¿å­˜ï¼ãƒ“ãƒ‡ã‚ªã‚’ä¿å­˜ã€</span> ã‚’ãŠè©¦ã—ãã ã•ã„ã€‚
        </p>
      </div>
    </section>

    <!-- å†™çœŸã‚¨ãƒªã‚¢ -->
    <section id="photoSection" class="mb-10">
      <h2 class="flex items-center gap-2 text-lg md:text-xl font-semibold text-slate-900 mb-3">
        <span>ğŸ“¸</span><span>å†™çœŸä¸€è¦§</span>
      </h2>
      <p class="text-xs md:text-sm text-slate-500 mb-3">
        æ°—ã«å…¥ã£ãŸå†™çœŸã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨åˆ¥ã‚¿ãƒ–ã§å¤§ããè¡¨ç¤ºã§ãã¾ã™ã€‚
        ã€Œâ†“ é–‹ã„ã¦ä¿å­˜ã€ã‹ã‚‰åŒã˜ç”»é¢ã‚’é–‹ãã“ã¨ã‚‚ã§ãã¾ã™ã€‚
      </p>

      <!-- å†™çœŸã®çŠ¶æ…‹è¡¨ç¤º -->
      <div id="photoStatus" class="text-sm text-slate-500 mb-3"></div>

      <!-- å†™çœŸã‚°ãƒªãƒƒãƒ‰ -->
      <div
        id="photoGrid"
        class="grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-4"
      ></div>
    </section>

    <!-- å‹•ç”»ã‚¨ãƒªã‚¢ -->
    <section id="videoSection" class="hidden mb-10">
      <h2 class="flex items-center gap-2 text-lg md:text-xl font-semibold text-slate-900 mb-3">
        <span>ğŸ¥</span><span>å‹•ç”»ä¸€è¦§</span>
      </h2>
      <p class="text-xs md:text-sm text-slate-500 mb-3">
        å¥½ããªå‹•ç”»ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨åˆ¥ã‚¿ãƒ–ã§å†ç”Ÿã§ãã¾ã™ã€‚
        ã€Œâ†“ é–‹ã„ã¦ä¿å­˜ã€ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ï¼ˆiPhoneã§ã¯â€œãƒ•ã‚¡ã‚¤ãƒ«â€ã‚¢ãƒ—ãƒªã«ä¿å­˜ã•ã‚Œã¾ã™ï¼‰ã€‚
      </p>

      <!-- å‹•ç”»ã®çŠ¶æ…‹è¡¨ç¤º -->
      <div id="videoStatus" class="text-sm text-slate-500 mb-3"></div>

      <!-- å‹•ç”»ã‚°ãƒªãƒƒãƒ‰ -->
      <div
        id="videoGrid"
        class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4"
      ></div>
    </section>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="mt-10 text-center text-xs text-slate-400">
      Â© 2025 å¤šå’Œæ¥½æ¯ã‚³ãƒ³ãƒšå®Ÿè¡Œå§”å“¡ä¼š
    </footer>
  </main>

  <script>
    // ========================
    // Cloudinary è¨­å®š
    // ========================
    const CLOUD_NAME = "dpef3dzrk";
    const TAG = "tawarahai2025";

    const tabPhotos = document.getElementById("tabPhotos");
    const tabVideos = document.getElementById("tabVideos");
    const photoSection = document.getElementById("photoSection");
    const videoSection = document.getElementById("videoSection");

    const photoGrid = document.getElementById("photoGrid");
    const videoGrid = document.getElementById("videoGrid");
    const photoStatus = document.getElementById("photoStatus");
    const videoStatus = document.getElementById("videoStatus");

    // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
    function activatePhotos() {
      tabPhotos.classList.add("bg-emerald-600", "text-white", "shadow-sm");
      tabPhotos.classList.remove("text-emerald-700", "hover:bg-emerald-100");
      tabVideos.classList.remove("bg-emerald-600", "text-white", "shadow-sm");
      tabVideos.classList.add("text-emerald-700", "hover:bg-emerald-100");
      photoSection.classList.remove("hidden");
      videoSection.classList.add("hidden");
    }

    function activateVideos() {
      tabVideos.classList.add("bg-emerald-600", "text-white", "shadow-sm");
      tabVideos.classList.remove("text-emerald-700", "hover:bg-emerald-100");
      tabPhotos.classList.remove("bg-emerald-600", "text-white", "shadow-sm");
      tabPhotos.classList.add("text-emerald-700", "hover:bg-emerald-100");
      videoSection.classList.remove("hidden");
      photoSection.classList.add("hidden");
    }

    tabPhotos.addEventListener("click", activatePhotos);
    tabVideos.addEventListener("click", activateVideos);

    // åˆ¥ã‚¿ãƒ–ã§é–‹ãï¼ˆå†™çœŸãƒ»å‹•ç”»å…±é€šï¼‰
    function openInNewTab(url) {
      window.open(url, "_blank");
    }

    // ========================
    // å†™çœŸã®å–å¾— & æç”»
    // ========================
    async function loadPhotos() {
      photoStatus.textContent = "å†™çœŸã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™â€¦";
      photoGrid.innerHTML = "";

      try {
        const res = await fetch(
          `https://res.cloudinary.com/${CLOUD_NAME}/image/list/${TAG}.json`
        );

        if (!res.ok) {
          photoStatus.textContent = "å†™çœŸã¯ã¾ã ã‚¢ãƒƒãƒ—ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚";
          return;
        }

        const data = await res.json();
        const resources = data.resources || [];

        if (resources.length === 0) {
          photoStatus.textContent = "å†™çœŸã¯ã¾ã ã‚¢ãƒƒãƒ—ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚";
          return;
        }

        photoStatus.textContent = "";
        renderPhotoGrid(resources);
      } catch (e) {
        console.error(e);
        photoStatus.textContent =
          "å†™çœŸã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚";
      }
    }

    function renderPhotoGrid(resources) {
      photoGrid.innerHTML = "";

      // æ–°ã—ã„é †ã«ä¸¦ã¹ãŸã„å ´åˆã¯ reverse
      const sorted = [...resources].reverse();

      sorted.forEach((asset) => {
        const url = asset.secure_url;
        const caption = asset.context?.custom?.caption || ""; // ãŠåå‰
        const comment = asset.context?.custom?.alt || "";     // ã‚³ãƒ¡ãƒ³ãƒˆ

        const card = document.createElement("article");
        card.className =
          "bg-white rounded-2xl shadow-sm border border-emerald-100 overflow-hidden flex flex-col";

        // ã‚µãƒ ãƒã‚¤ãƒ«
        const thumbBtn = document.createElement("button");
        thumbBtn.type = "button";
        thumbBtn.className = "relative w-full aspect-[4/5] overflow-hidden";
        thumbBtn.addEventListener("click", () => openInNewTab(url));

        const img = document.createElement("img");
        img.src = url;
        img.alt = caption || "photo";
        img.className = "w-full h-full object-cover hover:scale-105 transition-transform duration-300";
        thumbBtn.appendChild(img);

        // æœ¬æ–‡
        const body = document.createElement("div");
        body.className = "flex-1 flex flex-col px-3 py-2";

        const nameEl = document.createElement("p");
        nameEl.className = "text-sm font-semibold text-slate-800 truncate";
        nameEl.textContent = caption || "ï¼ˆãŠåå‰ãªã—ï¼‰";

        const commentEl = document.createElement("p");
        commentEl.className =
          "mt-0.5 text-xs text-slate-500 line-clamp-3 whitespace-pre-line";
        commentEl.textContent = comment || "";

        body.appendChild(nameEl);
        if (comment) body.appendChild(commentEl);

        // ã€Œé–‹ã„ã¦ä¿å­˜ã€ãƒœã‚¿ãƒ³ï¼ˆå†™çœŸã¯å˜ã«åˆ¥ã‚¿ãƒ–ã§é–‹ãï¼‰
        const btnWrap = document.createElement("div");
        btnWrap.className = "px-3 pb-3 pt-2 mt-auto";

        const openBtn = document.createElement("button");
        openBtn.type = "button";
        openBtn.className =
          "w-full inline-flex items-center justify-center gap-1 rounded-full bg-emerald-50 text-emerald-700 text-xs font-semibold py-1.5 hover:bg-emerald-100 transition";
        openBtn.textContent = "â†“ é–‹ã„ã¦ä¿å­˜";
        openBtn.addEventListener("click", () => openInNewTab(url));

        btnWrap.appendChild(openBtn);

        card.appendChild(thumbBtn);
        card.appendChild(body);
        card.appendChild(btnWrap);

        photoGrid.appendChild(card);
      });
    }

    // ========================
    // å‹•ç”»ã®å–å¾— & æç”»
    // ========================
    async function loadVideos() {
      videoStatus.textContent = "å‹•ç”»ã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™â€¦";
      videoGrid.innerHTML = "";

      try {
        const res = await fetch(
          `https://res.cloudinary.com/${CLOUD_NAME}/video/list/${TAG}.json`
        );

        if (!res.ok) {
          videoStatus.textContent = "å‹•ç”»ã¯ã¾ã ã‚¢ãƒƒãƒ—ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚";
          return;
        }

        const data = await res.json();
        const resources = data.resources || [];

        if (resources.length === 0) {
          videoStatus.textContent = "å‹•ç”»ã¯ã¾ã ã‚¢ãƒƒãƒ—ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚";
          return;
        }

        videoStatus.textContent = "";
        renderVideoGrid(resources);
      } catch (e) {
        console.error(e);
        videoStatus.textContent =
          "å‹•ç”»ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚";
      }
    }

    function renderVideoGrid(resources) {
      videoGrid.innerHTML = "";

      const sorted = [...resources].reverse();

      sorted.forEach((asset) => {
        const url = asset.secure_url;
        const caption = asset.context?.custom?.caption || ""; // ãŠåå‰
        const comment = asset.context?.custom?.alt || "";     // ã‚³ãƒ¡ãƒ³ãƒˆ

        const card = document.createElement("article");
        card.className =
          "bg-white rounded-2xl shadow-sm border border-emerald-100 overflow-hidden flex flex-col";

        // ã‚µãƒ ãƒã‚¤ãƒ«ï¼ˆç°¡æ˜“ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
        const thumbBtn = document.createElement("button");
        thumbBtn.type = "button";
        thumbBtn.className = "relative w-full aspect-video bg-black overflow-hidden";
        thumbBtn.addEventListener("click", () => openInNewTab(url));

        const video = document.createElement("video");
        video.src = url;
        video.muted = true;
        video.playsInline = true;
        video.className = "w-full h-full object-cover";
        thumbBtn.appendChild(video);

        const playBadge = document.createElement("div");
        playBadge.className =
          "absolute inset-0 flex items-center justify-center pointer-events-none";
        playBadge.innerHTML =
          '<div class="w-12 h-12 rounded-full bg-black/60 flex items-center justify-center text-white text-xl">â–¶</div>';
        thumbBtn.appendChild(playBadge);

        // æœ¬æ–‡
        const body = document.createElement("div");
        body.className = "flex-1 flex flex-col px-3 py-2";

        const nameEl = document.createElement("p");
        nameEl.className = "text-sm font-semibold text-slate-800 truncate";
        nameEl.textContent = caption || "ï¼ˆãŠåå‰ãªã—ï¼‰";

        const commentEl = document.createElement("p");
        commentEl.className =
          "mt-0.5 text-xs text-slate-500 line-clamp-3 whitespace-pre-line";
        commentEl.textContent = comment || "";

        body.appendChild(nameEl);
        if (comment) body.appendChild(commentEl);

        // ã€Œé–‹ã„ã¦ä¿å­˜ã€ãƒœã‚¿ãƒ³ï¼ˆdownload å±æ€§ã¤ãï¼‰
        const btnWrap = document.createElement("div");
        btnWrap.className = "px-3 pb-3 pt-2 mt-auto";

        const dlLink = document.createElement("a");
        dlLink.href = url;
        dlLink.setAttribute("download", "");
        dlLink.target = "_blank"; // LINE ãªã©ã§ã‚‚åˆ¥ã‚¿ãƒ–ã§é–‹ã
        dlLink.className =
          "w-full inline-flex items-center justify-center gap-1 rounded-full bg-emerald-50 text-emerald-700 text-xs font-semibold py-1.5 hover:bg-emerald-100 transition";
        dlLink.textContent = "â†“ é–‹ã„ã¦ä¿å­˜";

        btnWrap.appendChild(dlLink);

        card.appendChild(thumbBtn);
        card.appendChild(body);
        card.appendChild(btnWrap);

        videoGrid.appendChild(card);
      });
    }

    // åˆæœŸãƒ­ãƒ¼ãƒ‰
    loadPhotos();
    loadVideos();
    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯å†™çœŸã‚¿ãƒ–
    activatePhotos();
  </script>
</body>
</html>
