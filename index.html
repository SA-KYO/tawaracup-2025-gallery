<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å¤šå’Œæ¥½æ¯2025 ã‚®ãƒ£ãƒ©ãƒªãƒ¼</title>

  <!-- TailwindCSS CDNï¼ˆæœ¬ç•ªã§ã‚‚ã“ã®ã¾ã¾ã§OKï¼‰ -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- æ—¥æœ¬èªï¼‹è‹±å­—ãƒ•ã‚©ãƒ³ãƒˆ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Noto Sans JP', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    .title-font {
      font-family: 'Poppins', 'Noto Sans JP', system-ui, sans-serif;
      letter-spacing: 0.08em;
    }
  </style>
</head>
<body class="bg-gradient-to-b from-purple-50 via-white to-purple-50 min-h-screen px-4 py-6">

  <main class="max-w-4xl mx-auto">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="mb-6">
      <p class="text-xs text-purple-400 font-medium mb-1 tracking-wide">
        TAWARA CUP 2025
      </p>
      <h1 class="title-font text-2xl md:text-3xl font-bold text-purple-700 mb-2">
        å¤šå’Œæ¥½æ¯2025 ã‚®ãƒ£ãƒ©ãƒªãƒ¼
      </h1>
      <p class="text-xs md:text-sm text-gray-600 leading-relaxed">
        ã‚³ãƒ³ãƒšå½“æ—¥ã«ã¿ã‚“ãªãŒã‚¢ãƒƒãƒ—ã—ã¦ãã‚ŒãŸå†™çœŸãƒ»å‹•ç”»ãŒã€è‡ªå‹•ã§ã“ã“ã«ä¸¦ã³ã¾ã™ã€‚
      </p>
    </header>

    <!-- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”»é¢ã¸æˆ»ã‚‹ -->
    <div class="mb-5">
      <a
        href="https://tawaracup-2025-photo.netlify.app/"
        class="inline-flex items-center gap-1 text-xs md:text-sm px-4 py-2 rounded-full border border-purple-200 bg-white text-purple-700 shadow-sm hover:bg-purple-50 transition"
      >
        â† ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”»é¢ã«æˆ»ã‚‹
      </a>
    </div>

    <!-- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ -->
    <div class="flex mb-4 gap-2">
      <button
        id="tab-photo"
        class="flex-1 flex items-center justify-center gap-2 text-sm md:text-base font-semibold rounded-full py-2.5 bg-purple-600 text-white shadow"
        onclick="showTab('photo')"
      >
        <span>ğŸ“·</span>
        <span>å†™çœŸ</span>
      </button>
      <button
        id="tab-video"
        class="flex-1 flex items-center justify-center gap-2 text-sm md:text-base font-semibold rounded-full py-2.5 bg-white text-purple-700 border border-purple-200"
        onclick="showTab('video')"
      >
        <span>ğŸ¥</span>
        <span>å‹•ç”»</span>
      </button>
    </div>

    <!-- ä½¿ã„æ–¹èª¬æ˜ -->
    <section class="mb-6 bg-white rounded-2xl shadow-sm px-4 py-4 md:px-6 md:py-5">
      <h2 class="text-sm md:text-base font-semibold text-purple-700 mb-2">
        âœ… å†™çœŸãƒ»å‹•ç”»ã®ä¿å­˜æ–¹æ³•
      </h2>
      <p class="text-xs md:text-sm text-gray-700 leading-relaxed">
        ã‚¹ãƒãƒ›ï¼š
        <span class="font-semibold text-purple-700">ã€Œâ†“ é–‹ã„ã¦ä¿å­˜ã€</span>
        ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ— â†’ ç”»åƒãƒ»å‹•ç”»ãŒé–‹ã„ãŸç”»é¢ã‚’
        <span class="font-semibold">é•·æŠ¼ã—</span> ã—ã¦
        ã€Œå†™çœŸã«ä¿å­˜ã€ï¼ã€Œãƒ“ãƒ‡ã‚ªã‚’ä¿å­˜ã€ãªã©ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚<br>
        PCï¼šã‚µãƒ ãƒã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦é–‹ã„ãŸç”»é¢ã§å³ã‚¯ãƒªãƒƒã‚¯ â†’
        ã€Œåå‰ã‚’ä»˜ã‘ã¦ä¿å­˜ã€ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚
      </p>
    </section>

    <!-- å†™çœŸã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section id="photoSection" class="mb-10">
      <div class="flex items-center gap-2 mb-2">
        <span class="text-lg">ğŸ“¸</span>
        <h2 class="text-base md:text-lg font-semibold text-purple-700">
          å†™çœŸä¸€è¦§
        </h2>
      </div>
      <p class="text-xs text-gray-500 mb-3">
        æ°—ã«å…¥ã£ãŸå†™çœŸã‚’ã‚¿ãƒƒãƒ— â†’ ã€Œâ†“ é–‹ã„ã¦ä¿å­˜ã€ã§é–‹ã„ãŸç”»é¢ã‚’é•·æŠ¼ã—ã—ã¦ä¿å­˜ã§ãã¾ã™ã€‚
      </p>

      <div id="photoList" class="min-h-[120px]">
        <p class="text-sm text-gray-400">å†™çœŸã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™â€¦</p>
      </div>
    </section>

    <!-- å‹•ç”»ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section id="videoSection" class="mb-10 hidden">
      <div class="flex items-center gap-2 mb-2">
        <span class="text-lg">ğŸ¬</span>
        <h2 class="text-base md:text-lg font-semibold text-purple-700">
          å‹•ç”»ä¸€è¦§
        </h2>
      </div>
      <p class="text-xs text-gray-500 mb-3">
        å‹•ç”»ã‚µãƒ ãƒã‚¤ãƒ«ä¸‹ã®
        <span class="font-semibold text-purple-700">ã€Œâ†“ é–‹ã„ã¦ä¿å­˜ã€</span>
        ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ— â†’ é–‹ã„ãŸç”»é¢ã‚’é•·æŠ¼ã—ã—ã¦ã€Œãƒ“ãƒ‡ã‚ªã‚’ä¿å­˜ã€ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚
      </p>

      <div id="videoList" class="min-h-[120px]">
        <p class="text-sm text-gray-400">å‹•ç”»ã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™â€¦</p>
      </div>
    </section>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="mt-8 text-center text-[11px] text-gray-400">
      Â© 2025 å¤šå’Œæ¥½æ¯ã‚³ãƒ³ãƒšå®Ÿè¡Œå§”å“¡ä¼š
    </footer>
  </main>

  <!-- ==============================
       Cloudinary èª­ã¿è¾¼ã¿ & è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯
       ============================== -->
  <script>
    // --------- Cloudinary è¨­å®š ---------
    const CLOUD_NAME = "dpef3dzrk";

    // â˜…ãƒ•ã‚©ãƒ«ãƒ€åã§ã¯ãªãã€Œã‚¿ã‚°åã€ã‚’æŒ‡å®š
    const PHOTO_TAG = "tawarahai2025";        // å†™çœŸã«ä»˜ã‘ã¦ã„ã‚‹ã‚¿ã‚°
    const VIDEO_TAG = "tawarahai2025-video";  // å‹•ç”»ã«ä»˜ã‘ã¦ã„ã‚‹ã‚¿ã‚°

    // --------- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ ---------
    function showTab(type) {
      const photoBtn = document.getElementById("tab-photo");
      const videoBtn = document.getElementById("tab-video");
      const photoBox = document.getElementById("photoSection");
      const videoBox = document.getElementById("videoSection");

      if (type === "photo") {
        photoBtn.classList.add("bg-purple-600", "text-white", "shadow");
        photoBtn.classList.remove("bg-white", "text-purple-700", "border", "border-purple-200");

        videoBtn.classList.remove("bg-purple-600", "text-white", "shadow");
        videoBtn.classList.add("bg-white", "text-purple-700", "border", "border-purple-200");

        photoBox.classList.remove("hidden");
        videoBox.classList.add("hidden");
      } else {
        videoBtn.classList.add("bg-purple-600", "text-white", "shadow");
        videoBtn.classList.remove("bg-white", "text-purple-700", "border", "border-purple-200");

        photoBtn.classList.remove("bg-purple-600", "text-white", "shadow");
        photoBtn.classList.add("bg-white", "text-purple-700", "border", "border-purple-200");

        videoBox.classList.remove("hidden");
        photoBox.classList.add("hidden");
      }
    }

    // --------- å†™çœŸä¸€è¦§ã‚’èª­ã¿è¾¼ã‚€ ---------
    async function loadPhotos() {
      const url = `https://res.cloudinary.com/${CLOUD_NAME}/image/list/${PHOTO_TAG}.json`;
      const list = document.getElementById("photoList");
      list.innerHTML = `<p class="text-sm text-gray-400">å†™çœŸã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™â€¦</p>`;

      try {
        const res = await fetch(url);

        // ã‚¿ã‚°è‡ªä½“ãŒãªã„ï¼ã¾ã ä¸€æšã‚‚ã‚¢ãƒƒãƒ—ã•ã‚Œã¦ã„ãªã„
        if (!res.ok) {
          if (res.status === 404) {
            list.innerHTML = `<p class="text-gray-500 text-sm">å†™çœŸãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>`;
          } else {
            list.innerHTML = `<p class="text-red-500 text-sm">èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚</p>`;
          }
          return;
        }

        const data = await res.json();

        if (!data.resources || data.resources.length === 0) {
          list.innerHTML = `<p class="text-gray-500 text-sm">å†™çœŸãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>`;
          return;
        }

        // ã‚°ãƒªãƒƒãƒ‰ã‚’æç”»ï¼ˆã‚¹ãƒãƒ›2åˆ— / å¤§ãã‚ç”»é¢3åˆ—ï¼‰
        list.innerHTML = `
          <div class="grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-4"></div>
        `;
        const grid = list.querySelector("div.grid");

        data.resources.forEach(asset => {
          const html = `
            <div class="bg-white rounded-2xl shadow-sm hover:shadow-md transition overflow-hidden flex flex-col">
              <button
                class="block flex-1"
                onclick="openPhoto('${asset.secure_url}')"
              >
                <img
                  src="${asset.secure_url}"
                  alt=""
                  class="w-full h-40 md:h-44 object-cover"
                  loading="lazy"
                />
              </button>
              <button
                class="w-full text-[11px] md:text-xs text-purple-600 font-semibold py-2 border-t border-purple-50 hover:bg-purple-50"
                onclick="openPhoto('${asset.secure_url}')"
              >
                â†“ é–‹ã„ã¦ä¿å­˜
              </button>
            </div>
          `;
          grid.insertAdjacentHTML("beforeend", html);
        });

      } catch (error) {
        console.error("å†™çœŸèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:", error);
        list.innerHTML = `<p class="text-red-500 text-sm">èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚</p>`;
      }
    }

    // --------- å‹•ç”»ä¸€è¦§ã‚’èª­ã¿è¾¼ã‚€ ---------
    async function loadVideos() {
      const url = `https://res.cloudinary.com/${CLOUD_NAME}/video/list/${VIDEO_TAG}.json`;
      const list = document.getElementById("videoList");
      list.innerHTML = `<p class="text-sm text-gray-400">å‹•ç”»ã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™â€¦</p>`;

      try {
        const res = await fetch(url);

        if (!res.ok) {
          if (res.status === 404) {
            list.innerHTML = `<p class="text-gray-500 text-sm">å‹•ç”»ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>`;
          } else {
            list.innerHTML = `<p class="text-red-500 text-sm">èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚</p>`;
          }
          return;
        }

        const data = await res.json();

        if (!data.resources || data.resources.length === 0) {
          list.innerHTML = `<p class="text-gray-500 text-sm">å‹•ç”»ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>`;
          return;
        }

        list.innerHTML = `
          <div class="space-y-4 md:space-y-5"></div>
        `;
        const container = list.querySelector("div.space-y-4, div.space-y-5");

        data.resources.forEach(asset => {
          const html = `
            <div class="bg-white rounded-2xl shadow-sm p-3 md:p-4">
              <div class="rounded-xl overflow-hidden bg-black">
                <video
                  controls
                  class="w-full max-h-64 md:max-h-80 bg-black"
                  preload="metadata"
                >
                  <source src="${asset.secure_url}" type="video/mp4">
                </video>
              </div>
              <div class="mt-2 text-right">
                <button
                  class="text-[11px] md:text-xs text-purple-600 font-semibold hover:text-purple-700"
                  onclick="openVideo('${asset.secure_url}')"
                >
                  â†“ é–‹ã„ã¦ä¿å­˜
                </button>
              </div>
            </div>
          `;
          container.insertAdjacentHTML("beforeend", html);
        });

      } catch (error) {
        console.error("å‹•ç”»èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:", error);
        list.innerHTML = `<p class="text-red-500 text-sm">èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚</p>`;
      }
    }

    // --------- åˆ¥ã‚¿ãƒ–ã§é–‹ãï¼ˆiOS Safari ãªã‚‰ãƒ“ãƒ¥ãƒ¼ã‚¢â†’é•·æŠ¼ã—ä¿å­˜ï¼‰ ---------
    function openPhoto(url) {
      window.open(url, "_blank");
    }

    function openVideo(url) {
      window.open(url, "_blank");
    }

    // åˆæœŸãƒ­ãƒ¼ãƒ‰
    document.addEventListener("DOMContentLoaded", () => {
      loadPhotos();
      loadVideos();
    });
  </script>
</body>
</html>
