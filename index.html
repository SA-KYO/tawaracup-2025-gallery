<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å¤šå’Œæ¥½æ¯2025 ã‚®ãƒ£ãƒ©ãƒªãƒ¼</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Noto Sans JP', system-ui, sans-serif;
    }
    .title-font {
      font-family: 'Poppins', 'Noto Sans JP', sans-serif;
      letter-spacing: 0.06em;
    }
  </style>
</head>

<body class="bg-gradient-to-b from-purple-50 to-white min-h-screen pb-24">

  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header class="px-5 pt-6 pb-3">
    <h1 class="text-xl md:text-2xl font-bold text-purple-800 title-font">
      å¤šå’Œæ¥½æ¯2025 ã‚®ãƒ£ãƒ©ãƒªãƒ¼
    </h1>
    <p class="text-sm text-gray-600 mt-1">
      ã‚³ãƒ³ãƒšå½“æ—¥ã«ã¿ã‚“ãªãŒã‚¢ãƒƒãƒ—ã—ã¦ãã‚ŒãŸå†™çœŸãƒ»å‹•ç”»ãŒã€è‡ªå‹•ã§ã“ã“ã«ä¸¦ã³ã¾ã™ã€‚
    </p>

    <a href="https://tawaracup-2025-photo.netlify.app/"
       class="inline-block mt-4 text-sm text-purple-700 border border-purple-300 rounded-full px-4 py-1.5 hover:bg-purple-50 transition">
      â† ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”»é¢ã«æˆ»ã‚‹
    </a>
  </header>

  <!-- å†™çœŸãƒ»å‹•ç”»ã‚¿ãƒ– -->
  <div class="px-5 mt-4 grid grid-cols-2 gap-3">
    <button id="tabPhoto"
      class="py-2 rounded-full font-semibold bg-purple-600 text-white shadow">
      ğŸ“¸ å†™çœŸ
    </button>

    <button id="tabVideo"
      class="py-2 rounded-full font-semibold bg-white text-purple-700 border border-purple-300">
      ğŸ¥ å‹•ç”»
    </button>
  </div>

  <!-- å†™çœŸä¸€è¦§ -->
  <section id="photoSection" class="px-5 mt-6">
    <h2 class="text-lg md:text-xl font-bold text-purple-800 flex items-center gap-2 mb-2">
      ğŸ“¸ å†™çœŸä¸€è¦§
    </h2>

    <!-- â˜… è¿½åŠ ï¼šæ³¨æ„æ›¸ã -->
    <p class="text-xs text-gray-500 mb-3 leading-5">
      â€»ã€Œâ†“ é–‹ã„ã¦ä¿å­˜ã€ã‚’ã‚¿ãƒƒãƒ— â†’ é–‹ã„ãŸç”»é¢ã‚’é•·æŠ¼ã— â†’ã€Œå†™çœŸã«ä¿å­˜ã€ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚
    </p>

    <div id="photoList"
         class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6">
    </div>
  </section>

  <!-- å‹•ç”»ä¸€è¦§ -->
  <section id="videoSection" class="px-5 mt-6 hidden">
    <h2 class="text-lg md:text-xl font-bold text-purple-800 flex items-center gap-2 mb-3">
      ğŸ¥ å‹•ç”»ä¸€è¦§
    </h2>

    <div id="videoList"
         class="grid grid-cols-1 gap-6">
    </div>
  </section>

  <!-- Cloudinary API JavaScript -->
  <script>
    const CLOUD_NAME = "dpef3dzrk";
    const FOLDER = "tawarahai-2025";

  /* -------------------------
        å†™çœŸä¸€è¦§ã‚’èª­ã¿è¾¼ã¿
-------------------------- */
async function loadPhotos() {
  const url = `https://res.cloudinary.com/${CLOUD_NAME}/image/list/${FOLDER}.json`;

  try {
    const res = await fetch(url);

    const list = document.getElementById("photoList");
    list.innerHTML = "";

    // ãƒ•ã‚©ãƒ«ãƒ€ï¼ˆã‚¿ã‚°ï¼‰è‡ªä½“ãŒå­˜åœ¨ã—ãªã„ or 404 â†’ å†™çœŸãªã—æ‰±ã„
    if (!res.ok) {
      list.innerHTML = `<p class="text-gray-500">å†™çœŸãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>`;
      return;
    }

    const data = await res.json();

    // å†™çœŸãŒ 1 æšã‚‚ãªã„å ´åˆ
    if (!data.resources || data.resources.length === 0) {
      list.innerHTML = `<p class="text-gray-500">å†™çœŸãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>`;
      return;
    }

    // é€šå¸¸ï¼šå†™çœŸä¸€è¦§ã‚’ 2 åˆ—ã‚°ãƒªãƒƒãƒ‰ã§è¡¨ç¤º
    data.resources.forEach(asset => {
      const html = `
        <button
          class="group block bg-white rounded-2xl shadow hover:shadow-lg transition overflow-hidden"
          onclick="openPhoto('${asset.secure_url}')"
        >
          <img
            src="${asset.secure_url}"
            alt=""
            class="w-full h-56 object-cover"
          />
          <div class="px-4 py-3 border-t border-purple-50 text-right">
            <span class="inline-flex items-center text-xs text-purple-600 font-medium">
              â†“ é–‹ã„ã¦ä¿å­˜
            </span>
          </div>
        </button>
      `;
      list.insertAdjacentHTML("beforeend", html);
    });

  } catch (e) {
    console.error("å†™çœŸèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:", e);
    document.getElementById("photoList").innerHTML = `
      <p class="text-red-500">èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚</p>`;
  }
}

/* -------------------------
        å‹•ç”»ä¸€è¦§ã‚’èª­ã¿è¾¼ã¿
-------------------------- */
async function loadVideos() {
  const url = `https://res.cloudinary.com/${CLOUD_NAME}/video/list/${FOLDER}.json`;

  try {
    const res = await fetch(url);

    const list = document.getElementById("videoList");
    list.innerHTML = "";

    // ãƒ•ã‚©ãƒ«ãƒ€è‡ªä½“ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ 404 â†’ å‹•ç”»ãªã—æ‰±ã„
    if (!res.ok) {
      list.innerHTML = `<p class="text-gray-500">å‹•ç”»ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>`;
      return;
    }

    const data = await res.json();

    // å‹•ç”»ãŒ 1 ä»¶ã‚‚ç„¡ã„å ´åˆ
    if (!data.resources || data.resources.length === 0) {
      list.innerHTML = `<p class="text-gray-500">å‹•ç”»ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>`;
      return;
    }

    // é€šå¸¸ï¼šå‹•ç”»ãŒã‚ã‚‹å ´åˆã®ã¿è¡¨ç¤º
    data.resources.forEach(asset => {
      const html = `
        <div class="bg-white rounded-2xl shadow p-3">
          <video controls class="rounded-xl w-full">
            <source src="${asset.secure_url}" type="video/mp4">
          </video>
          <div class="mt-2 text-right">
            <button
              class="text-xs text-purple-600 font-medium"
              onclick="openVideo('${asset.secure_url}')"
            >
              â†“ é–‹ã„ã¦ä¿å­˜
            </button>
          </div>
        </div>
      `;
      list.insertAdjacentHTML("beforeend", html);
    });

  } catch (e) {
    console.error("å‹•ç”»èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:", e);
    document.getElementById("videoList").innerHTML = `
      <p class="text-red-500">èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚</p>`;
  }
}

    /* -------------------------
             ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
    -------------------------- */
    document.getElementById("tabPhoto").addEventListener("click", () => {
      photoSection.classList.remove("hidden");
      videoSection.classList.add("hidden");

      tabPhoto.classList.add("bg-purple-600", "text-white");
      tabVideo.classList.remove("bg-purple-600", "text-white");
    });

    document.getElementById("tabVideo").addEventListener("click", () => {
      videoSection.classList.remove("hidden");
      photoSection.classList.add("hidden");

      tabVideo.classList.add("bg-purple-600", "text-white");
      tabPhoto.classList.remove("bg-purple-600", "text-white");
    });

    /* -------------------------
            åˆæœŸãƒ­ãƒ¼ãƒ‰
    -------------------------- */
    loadPhotos();
    loadVideos();
  </script>

</body>
</html>
